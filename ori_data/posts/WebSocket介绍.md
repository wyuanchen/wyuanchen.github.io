---
title: WebSocket介绍
date: 2016-07-18 16:06:18
categories: 网络协议     
tags: WebSocket  
---
 
首先我们先来看看HTTP这种非持久的协议的一些特点     
- HTTP的生命周期通过Request来界定，也就是一个Request 一个Response，那么在HTTP1.0中，这次HTTP请求就结束了。   
- 在HTTP1.1中进行了改进，使得有一个keep-alive，也就是说，在一个HTTP连接中，可以发送多个Request，接收多个Response。     
- 但是一个request只能有一个response。而且这个response也是被动的，不能主动发起。      

<!-- more -->

在WebSocket还没出现之前有以下实现长连接的方式    

### ajax轮询   

ajax轮询 的原理非常简单，让浏览器隔个几秒就发送一次请求，询问服务器是否有新信息。     
这种方式需要服务器有很快的处理速度和资源。     

### long poll   

long poll 其实原理跟 ajax轮询 差不多，都是采用轮询的方式，不过采取的是阻塞模型（一直打电话，没收到就不挂电话），也就是说，客户端发起连接后，如果没消息，就一直不返回Response给客户端。直到有消息才返回，返回完之后，客户端再次建立连接，周而复始。       
这种方式需要服务端有很高的并发，也就是说同时接待客户的能力。     

从上面可以看出其实这两种方式，都是在不断地建立HTTP连接，然后等待服务端处理，可以体现HTTP协议的另外一个特点，被动性。何为被动性呢，其实就是，服务端不能主动联系客户端，只能有客户端发起。       

### WebSocket   

WebSocket协议本质上是一个基于TCP的协议，它由通信协议和编程API组成，WebSocket能够在浏览器和服务器之间建立双向连接，以基于事件的方式，赋予浏览器实时通信能力。既然是双向通信，就意味着服务器端和客户端可以同时发送并响应请求，而不再像HTTP的请求和响应，解决了上面同步有延迟，而且还非常消耗资源的这种情况。   




